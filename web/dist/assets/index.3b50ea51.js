import{r,j as s,M as G,t as P,b as a,U as l,w as _,e as U,d as z,f as A,N as H,y as $,T as q}from"./index.d8d91588.js";import{I as J}from"./ckeditor.a2057d7b.js";import{a as f,E as K,b as Q,S as V,A as W}from"./pem_check.3e14cc85.js";import{h as S,C as X}from"./moment.a4b4dba9.js";import{u as b,n as Y,l as i,m as E}from"./states.e29b37a1.js";import{C as Z}from"./CalendarOutlined.3e9bb1c6.js";import{T as x}from"./index.a843e620.js";import{C as ee}from"./index.9a22fd67.js";import"./index.f77f15be.js";import"./index.ec907f20.js";import"./iconUtil.3e86a04f.js";import"./index.93d02781.js";import"./PlusOutlined.16a4ec92.js";const N=r.exports.forwardRef(({},g)=>{const[o,m]=r.exports.useState({}),[h,d]=r.exports.useState(!1),c=n=>{l.toggleGlobalLoading(),_.apiCall(`${b.crud}${n}`).then(y=>{m(y),d(!0)}).finally(()=>l.toggleGlobalLoading(!1))};return r.exports.useImperativeHandle(g,()=>({loadData:c})),s(G,{destroyOnClose:!0,okButtonProps:{style:{display:"none"}},open:h,onCancel:()=>d(!1),cancelText:P.exports.t`Cancel`,width:970,title:o.title,children:[s("div",{style:{padding:"1rem"},children:[a(Z,{})," ",l.timeAgo(o.created_at)]}),a("div",{style:{padding:"0 1rem"},dangerouslySetInnerHTML:{__html:o.content},className:"detail-new"})]})});N.displayName="newDialog";const te=N,u="news",{Title:ae}=q;function re(){const g=U(),o=H.navigateTo(g),m=r.exports.useRef();r.exports.useRef();const h=r.exports.useRef(),[d,c]=r.exports.useState(!0),[n,y]=r.exports.useState({page:1}),[F,j]=r.exports.useState({page:n.page,total:0,page_size:15}),[w,C]=r.exports.useState([]),L=z(Y),B=()=>{c(!0),_.apiCall(b.crud,n).then(e=>{j(t=>({page:n.page,total:e.count,page_size:e.page_size})),C(e.items),L(e.extra.options)}).catch(()=>{}).finally(()=>{c(!1)})},M=e=>{k({search:e,page:1})},k=(e={})=>{y(t=>({...t,...e}))};r.exports.useEffect(()=>{B()},[n]);const R=e=>{!window.confirm(E.deleteOne)||(l.toggleGlobalLoading(!0),_.apiCall(`${b.crud}${e}`,{},"delete").then(()=>{C([...w.filter(p=>p.id!==e)])}).finally(()=>l.toggleGlobalLoading(!1)))},O=[{key:"index",title:"STT",dataIndex:"index",width:60},{key:"cover_image",title:i.cover_image,dataIndex:"cover_image",render:(e,t)=>a(J,{type:"thumbnail",url:e}),width:120},{key:"title",title:i.title,dataIndex:"title",render:(e,t)=>a("a",{href:"#",onClick:()=>{},children:e})},{key:"type",title:i.type,dataIndex:"type",render:(e,t)=>t.type_obj.label,width:120},{key:"registration_time",title:i.registration_time,dataIndex:"registration_time",render:(e,t)=>s("span",{children:["T\u1EEB ",S(t.registration_from).format("DD/MM/yyyy")," \u0111\u1EBFn ",S(t.registration_to).format("DD/MM/yyyy")]}),width:150},{key:"occurring_time",title:i.occurring_time,dataIndex:"occurring_time",render:(e,t)=>e,width:100},{key:"place",title:i.place,dataIndex:"place",render:(e,t)=>e,width:100},{key:"beneficiaries",title:i.beneficiaries,dataIndex:"beneficiaries",render:(e,t)=>e,width:100},{key:"created_by",title:i.created_by,dataIndex:"created_by",render:(e,t)=>t.created_by_obj.label,width:100},{key:"status",title:i.status,dataIndex:"status",render:(e,t)=>{var p,I,D,T;switch(t.status){case 1:return a(x,{color:"#00AD45",children:(p=t.status_obj)==null?void 0:p.label});case 2:return a(x,{color:"#1980FF",children:(I=t.status_obj)==null?void 0:I.label});case 3:return a(x,{color:"#F5F5F5",style:{color:"#484848"},children:(D=t.status_obj)==null?void 0:D.label});default:return(T=t.status_obj)==null?void 0:T.label}},width:150},{key:"action",title:"",fixed:"right",render:(e,t)=>s("div",{className:"flex-space",children:[a(f,{pem_group:u,pem:"change",children:a(K,{onClick:()=>v(t.id)})}),a(f,{pem_group:u,pem:"delete",children:a(Q,{onClick:()=>R(t.id)})})]}),width:120}],v=(e=0)=>{o("/activity/campaign/"+e)};return a(A,{children:s(ee,{title:a(()=>s($,{size:12,children:[a(ae,{level:5,style:{marginBottom:0},children:E.heading}),a(f,{pem_group:u,pem:"add",children:a(W,{onClick:()=>v()})})]}),{}),extra:a(V,{onChange:M,placeholder:"T\xECm ki\u1EBFm tin t\u1EE9c",width:"400px"}),children:[a(X,{columns:O,list:w,loading:d,scroll:{x:1e3},ref:m,pem:u,paging:F,selection:!1,onChange:k}),a(te,{ref:h})]})})}re.displayName="New";export{re as default};
