import{e as _,F as l,c as q,r as p,U as f,a as i,j as h,x as w,b as e,y as A,B as g,bq as B,N as L,bw as V,w as j,T as $}from"./index.d8d91588.js";import{U as H}from"./upload_file_util.e2f31e55.js";import{T as F}from"./select_input.a4e8b1c9.js";import{F as O}from"./index.59abc101.js";import{n as P,e as z,u as E,l as n,m as G}from"./states.5b5f5782.js";import{I as Q,C as Y}from"./ckeditor.a2057d7b.js";import{T as J}from"./index.0012090e.js";import{C as K}from"./index.9a22fd67.js";import"./index.ec907f20.js";import"./index.f77f15be.js";import"./iconUtil.3e86a04f.js";import"./PlusOutlined.16a4ec92.js";const b="newForm";function y({data:t,onChange:C}){const c=_(),m=L.navigateTo(c),[s]=l.useForm(),r=q(P),[o,v]=p.exports.useState("");p.exports.useEffect(()=>{s.setFieldsValue({...s.getFieldValue(),...t}),v(t.cover_image||"")},[t]);const x=f.isEmpty(t)?z:{...t},u=x.id,T=u?`${E.crud}${u}`:E.crud,k=u?"put":"post";let{categories:R,types:I}=r;const a={title:{name:"title",label:n.title,rules:[i.ruleRequired()]},categories:{name:"categories",label:n.categories,rules:[i.ruleRequired()]},type:{name:"type",label:n.type,rules:[i.ruleRequired()]},cover_image:{name:"cover_image",label:n.cover_image,rules:[i.ruleRequired()]},content:{name:"content",label:n.content,rules:[i.ruleRequired()]},status:{name:"status",label:n.status}},U=d=>{s.setFieldsValue({...s.getFieldValue(),cover_image:d.path}),v(d.path)},D=()=>{H.upload("*","task",U)},N=()=>{m("/article/news/")};return h(l,{form:s,name:b,labelCol:{span:3},labelAlign:"left",wrapperCol:{span:21},requiredmarkposition:"right",initialValues:{...x},onFinish:d=>i.submit(T,d,k).then(S=>{w.success({message:(u?"Ch\u1EC9nh s\u1EEDa":"Th\xEAm m\u1EDBi")+" tin t\u1EE9c th\xE0nh c\xF4ng",duration:8}),m("/article/news/")}).catch(S=>{w.error({message:(u?"Ch\u1EC9nh s\u1EEDa":"Th\xEAm m\u1EDBi")+" tin t\u1EE9c th\u1EA5t b\u1EA1i",duration:8})}),children:[e(l.Item,{...a.title,children:e(O,{})}),e(l.Item,{...a.categories,children:e(J,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:R,placeholder:"Ch\u1ECDn danh m\u1EE5c tin t\u1EE9c",treeDefaultExpandAll:!0,fieldNames:{label:"label",value:"value",children:"children"},treeCheckable:!0,showSearch:!0,treeNodeFilterProp:"name"})}),e(l.Item,{...a.type,children:e(F,{block:!0,options:I,blankLabel:a.type.label})}),e(l.Item,{...a.cover_image,children:h(A,{size:12,children:[e(g,{onClick:D,children:"T\u1EA3i \u1EA3nh l\xEAn"}),e("div",{style:{width:150},children:e(Q,{type:"thumbnail",url:o})})]})}),e(l.Item,{...a.content,children:e(Y,{})}),e(l.Item,{...a.status,children:e(F,{block:!0,options:B,blankLabel:a.status.label})}),h("div",{style:{width:"100%",display:"flex",justifyContent:"end",gap:10},children:[e(g,{onClick:N,children:"Quay l\u1EA1i"}),e(g,{type:"primary",htmlType:"submit",children:"L\u01B0u"})]})]})}y.displayName=b;y.formName=b;const{Title:M}=$;function ue(){const{id:t}=V(),[C,c]=p.exports.useState({});p.exports.useEffect(()=>{m(t)},[t]);const m=r=>{r!="0"?(f.toggleGlobalLoading(),j.apiCall(`${E.crud}${r}`).then(o=>{c(o)}).finally(()=>f.toggleGlobalLoading(!1))):c({})};return e(K,{title:e(()=>e(A,{size:12,children:e(M,{level:5,style:{marginBottom:0},children:G.heading})}),{}),children:e(y,{data:C,onChange:(r,o)=>{setOpen(!1),onChange(r,o)}})})}export{ue as default};
